<div class="row">
    <div class="col-sm-12">
        <h2>Create Question</h2>
    </div>
</div>

<form [formGroup]="questionForm" (ngSubmit)="onSubmit(questionForm.value)" novalidate>

    <div class="row">
        <div class="col-sm-3">
            <div class="form-group">
                <label for="dateCreated">Date Created</label>
                <input 
                    type="text" 
                    class="form-control"
                    id="dateCreated"
                    formControlName="dateCreated"
                    ngModel="{{dateCreated | date:'MM/dd/yy'}}"
                    disabled>
            </div>
        </div>
    </div>


    <div class="row">
        <div class="col-sm-8">
            <div class="form-group">
                <label for="questionText">Question</label>
                <textarea 
                    class="form-control"
                    placeholder="Enter a question" 
                    id="questionText"
                    formControlName="text"
                    required></textarea>
            </div>
            <div *ngIf="questionForm.controls.text.touched && questionForm.controls.text.errors || 
                        questionForm.controls.text.errors && clickedSubmit"
                class="alert alert-danger">
                Question is required.
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-6">
            <div class="form-group">
                <label for="technology">Technology</label>
                <input 
                    type="text"
                    class="form-control"
                    placeholder="Examples: JavaScript, Angular or .NET, etc." 
                    id="technology"
                    formControlName="tech"
                    required>
            </div>
            <div *ngIf="questionForm.controls.tech.touched && questionForm.controls.tech.errors || 
                        questionForm.controls.tech.errors && clickedSubmit"
                class="alert alert-danger">
                Technology is required.
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-4">
            <div class="form-group">
                <label for="company">Company</label>
                <input 
                    type="text"
                    class="form-control"
                    formControlName="company"
                    id="company"
                    placeholder="Company Name">
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-3">
            <div class="form-group">
                <label for="questionLevel">Level</label>
                <select
                    class="form-control"
                    id="questionLevel"
                    formControlName="level"
                    required>
                        <option *ngFor="let level of levels" value="{{level}}">{{level}}</option>
                </select>
            </div>
            <div *ngIf="questionForm.controls.level.touched && questionForm.controls.level.errors || 
                        questionForm.controls.level.errors && clickedSubmit"
                class="alert alert-danger">
                Level is required.
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-12">
            <tags 
                [sharedTagsArray]="selectedTags"
                (selectedTagsChange)="manageSelectedTags($event)">
            </tags>
            <input 
                type="text"
                style="display: none" 
                class="form-control"
                ngModel="{{enteredTags | json}}"
                id="questionTags"
                formControlName="tags">
                 <div *ngIf="enteredTags.length == 0 && clickedSubmit" 
                    class="alert alert-danger">
                    You must select at least one tag.
                </div>
        </div>
       
    </div>

    <div class="row">
        <div class="col-sm-9">
            <h3>Preferred Answer</h3>
            <div class="form-group">
                <label for="bestAnswer">Preferred Answer</label>
                <textarea 
                    class="form-control" 
                    placeholder="Enter a preferred answer for this question" 
                    id="bestAnswer" 
                    formControlName="preferredAnswers"
                    required></textarea>
            </div>
            <div *ngIf="questionForm.controls.preferredAnswers.touched && questionForm.controls.preferredAnswers.errors || 
                        questionForm.controls.preferredAnswers.errors && clickedSubmit"
                class="alert alert-danger">
                Preferred answer is required.
                </div>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-9">
            <acceptable-answers 
                [shareAcceptableAnswers]="otherAcceptableAnswers"
                (acceptableAnswersChange)="manageAcceptableAnswers($event);">
            </acceptable-answers>

            <div class="answer-list">

                <input 
                    type="hidden" 
                    formControlName="answers" 
                    ngModel="{{ otherAcceptableAnswers | json }}"> 
                <div 
                    class="row" 
                    *ngFor="let answer of otherAcceptableAnswers; let i = index;" 
                    [hidden]="otherAcceptableAnswers.length === 0">
                    <div class="col-sm-11">
                        <div class="form-group">
                            <label 
                                [attr.for]="'answer' + i">
                                Acceptable Answer {{i + 1}}
                            </label>
                            <textarea 
                               value="{{answer}}"
                               id="answer{{i}}"
                               class="form-control"></textarea>
                        </div>
                    </div>
                    <div class="col-sm-1">
                        <a class="btn btn-sm" (click)="removeAnswer(answer)">
                            <i class="glyphicon glyphicon-trash"></i>
                        </a>
                        <a class="btn btn-sm">
                            <i class="glyphicon glyphicon-star-empty"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-12">
            <input type="reset" value="Clear" class="btn btn-default btn-lg">
            <input type="submit" value="Create Question" class="btn btn-primary btn-lg">
        </div>
    </div>

</form>